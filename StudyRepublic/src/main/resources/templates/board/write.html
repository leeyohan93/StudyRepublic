<!-- 
  @author 윤원식
  @since 2019. 1. 25.
  @version
  -write.html 추가
 -->
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layout/mainLayout}"
>
<head>

<title></title>
<meta http-equiv="Content-Type" content="text/html"; charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/smarteditor/js/HuskyEZCreator.js" charset="utf-8"></script>

<style>
.boardSelect {
	margin-top: 50px;
}

#boardType {
	width: 250px;
	height: 40px;
	padding-left: 10px;
	border: 1px solid #ccc;
	border-radius: 4px;
	font-size: 16px;
}

#boardTitle {
	width: 50%;
	height: 40px;
	padding: 12px 13px;
	margin: 10px 0px;
	border: 1px solid #ccc;
	border-radius: 4px;
	font-size: 16px;
	display: inline-block;
}

#boardNotice, #boardHide {
	margin: 0 5px 0 20px;
	transform: scale(1.5);
}

.boardTitleOpt {
	font-size: 16px;
}

#smarteditor {
	width: 95%;
	height: 100%
}

/* .cancelBtn{ */
/*     position:relative; */
/*     top: -22px; */
/*     left: -543px; */
/* } */
/* .previewBtn{ */

/*    position:relative; */
/*     top: -55px; */
/*     left: 772px; */
/* } */

/* .registerBtn{ */
/*     position:relative; */
/*     top: -55px; */
/*     left: 774px; */
/* } */
</style>

</head>

<body>	


<div id = "main" layout:fragment = "main">
<div class="inner">


<form id="boardWriteForm" th:action="@{registerBoard}" method="post">
	 
	 <div class="boardSelect">
	 <select id ="boardType" name = "boardType">
	 <option>게시판 선택 </option>
     <option value ='freeBoard'>자유게시판</option>
	 <option value ='requestBoard'>스터디 요청게시판</option>
	 <option value ='inquireBoard'>문의게시판</option>
	</select> 
	</div>
	
<!-- 제목, 공지옵션, 비공개옵션, -->
  <span>
	<input id ="boardTitle" name ="title" type="text" placeholder="제목을 입력해주세요.">
	<input id ="boardWriter" name ='id' type='hidden' th:value="${memberId}">
	</span>
    <input id ="boardNotice" name ="notice" type="checkbox" value="0">
    <span class ="boardTitleOpt">공지</span> 

  
  <!--제목, 공지옵션, 비공개옵션 끝 -->
  
  <!-- 스마트 에디터 적용 글내용 -->
  <div id = "editor">
    <div>  
       <textarea name="content" id="smarteditor" rows="10" cols="100"></textarea>
	</div>
  </div>

	<!--스마트 에디터 적용 글내용 끝  -->
  
  <span class="cancelBtn">
    <a class ="btn btn-default" th:href="@{listFreeBoard}" role="button" id="cancel">취소</a> 
  </span>
  
  <span class="previewBtn">
    <button class="btn btn-default" name="writePreview" id="writePreview" type="button">미리보기</button> 
   
  </span>
  <span class="registerBtn">
	 <button class="btn btn-default" name="boardRegister" id="boardRegister"  type="submit">확인</button>
  </span>
	 </form>
  </div>
 
 



<script th:inline="javascript">


//스마트에디터 여기부터
$(document).ready(function(){

	//전역변수선언
    var editor_object = [];


    
     
    nhn.husky.EZCreator.createInIFrame({
        oAppRef: editor_object,
        elPlaceHolder: "smarteditor",
        sSkinURI: "/smarteditor/SmartEditor2Skin.html",
        htParams : {
            // 툴바 사용 여부 (true:사용/ false:사용하지 않음)
            bUseToolbar : true,            
            // 입력창 크기 조절바 사용 여부 (true:사용/ false:사용하지 않음)
            bUseVerticalResizer : true,    
            // 모드 탭(Editor | HTML | TEXT) 사용 여부 (true:사용/ false:사용하지 않음)
            bUseModeChanger : true,
            // 기본 글꼴 설정
            SE2M_FontName: {
    			htMainFont: {'id': '굴림','name': '굴림','size': '14','url': '','cssUrl': ''} 
    		}
        }
    

    });

     
    //전송버튼 클릭이벤트
    $("#boardRegister").click(function(){
        //id가 smarteditor인 textarea에 에디터에서 대입
        editor_object.getById["smarteditor"].exec("UPDATE_CONTENTS_FIELD", []);
              
        $("#boardWriteForm").submit();
            
    });

    
    
    //미리보기
    $('#writePreview').click(function(){

    	editor_object.getById["smarteditor"].exec("UPDATE_CONTENTS_FIELD", []);
    	
    	 var popOption = "width=750px, height=750px, top=50px, left=600px;"
        window.open("preview","previewPage",popOption);


    });
    

});
    
    //공지사항
    $("#boardNotice").change(function(){
    	
    	if($("#boardNotice").is(":checked")){ 	
    	
    		var c = $("#boardNotice").val(1);
    		console.log(c.val());
    		

    	}else{
    		var d= $("#boardNotice").val(0);  
    		console.log(d.val());
    		
    	}  
    	
    })
  


    </script>
   </div>
    </body>
</html>