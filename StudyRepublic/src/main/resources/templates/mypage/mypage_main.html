<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layout/mainLayout}">
<!-- layout:decorate="~{/layout/mainLayout}" -->
<head>
<meta charset="UTF-8">
<title>회원정보</title>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">

<style>
li {
	list-style: none;
}

.left {
	float: left;
	background-color: green;
	width: 10%;
	height: 300px;
	padding: 3px 3px;
}

.premium {
	margin-bottom: 50px;
	background-color: orange;
	padding-bottom: 50px solid;
	width: 100%;
	height: 45px;
}

.tutor {
	background-color: yellow;
	padding-bottom: 50px solid;
	width: 100%;
	height: 45px;
}

.top_middle {
	background-color: white;
	float: left;
	width: 40%;
	height: 200px;
	padding: 6px 20px;
}

.top_right {
	background-color: white;
	border: solid;
	float: left;
	height: 250px;
	width: 300px;
}

.scheduler {
	float: right;
	border: solid;
	width: 100%;
	height: 40px;
	background-color: orange;
}

.top_left {
	float: left;
	height: 200px;
	width: 300px;
	background-color: yellowgreen;
}

.status {
	width: 294px;
	height: 70px;
	background-color: whitesmoke;
	margin: 3px 3px;
	border: solid;
}

.profile {
	float: left;
	width: 45px;;
	height: 65%;
	background-color: white;
	border: solid;
}

.member_info {
	float: right;
	background-color: white;
	width: 240px;
	height: 65%;
	border: solid;
}

.membermodify {
	float: right;
	width: 100px;
	height: 45px;
}

.mid_middle {
	
	background-color: blue;
	width: 90%;
	height: 200px;
}

.low_middle {
	margin-top: 30px;
	background-color: yellow;
	width: 90%;
	height: 150px;
}
</style>

</head>
<body>

	<div id="main" layout:fragment="main">
		<div class="inner">
			
			<nav>
				<div class="left">
					<div class="premium">프리미엄등급신청</div>
					<li><a>신청하기</a></li>
					<li><a>신청현황</a></li>
					<div class="tutor">강사페이지</div>
					<li><a>강사 프로필</a></li>
					<li><a>프리미엄스터디 개설내역</a></li>
				</div>
			</nav>
			
			
			<article>
			
				<div class="membermodify">
							<a class="btn btn-primary" id="modifybut" th:href="@{modimember}"
								role="button">수정하기</a>
				</div>
				<div class="top_middle">
					<div class="top_left">
						<div class="status">
							<span sec:authentication="principal.member.nickname"></span>님이 접속중입니다.<br> 
							<a href="receiveMessage">쪽지함</a> 
							<a href="activityinfo">활동정보</a>
						</div>


						
						<div  th:each="mbr : ${mbr}">
							<div class="profile">
								<img id="img_profile" th:src="@{'/member_image/'+${mbr.profileSaveName}}" style="width:100%; height:100%"/>
							</div>
							<div class="member_info">
								ID:
								<td th:text=${mbr.id} />
								<br> 이름:
								<td th:text=${mbr.name} />
								<br> 성별:
								<td th:text=${mbr.gender} />
								<br> 생년월일:
								<td th:text=${mbr.birth} />
								<br> E-Mail:
								<td th:text=${mbr.email} />
								<br> 연락처:
								<td th:text=${mbr.phonenumber} />
								<br>
	
							</div>
						</div>
					
					</div>
						

					




					
					<div class="top_right">
						<button type="button" class="scheduler">MY스케줄러</button>

						<div class="studystatus">
							현재진행중인 스터디<br> <br>일반스터디<br>
							<tr th:each="studymember : ${smr}" >
								<li th:if="!${studymember.study.name == ''}">진행중인스터디가없습니다.</li>
								<li th:unless="${studymember.study.name == ''}" th:text="${studymember.study.name}"></li>
							</tr>
							
							
							
						<!-- 	<tr th:each=" studymember : ${smr2}" >
								<td>
								 	<li th:if="${studymember2} != 0">진행중인스터디가없습니다.</li>
									<li th:if="${studymember} != null" th:text="${studymember.study.name}"></li>
									 <li th:if="${studymember} == null" th:text="@{진행중인스터디가없습니다.}"></li>
								</td>
							 </tr> 
						</tr>-->
								
						
							


							
							<br>프리미엄스터디<br>
							<li>현재 진행중인 스터디가 없습니다.</li>
						
						</div>
					
					</div>
				</div>





					
					<div class="mid_middle">
					
						<div class="join-input100" style = "border: 0; margin: -10px 0px -19px 0px;">
						<span class="label-input100">스터디 관심지역</span>
						</div>
						
						<div class="join-input100" id = "loc" style = "float:left; height:50px;">
						<div id="guide" style="color:#999;display:none;"></div>
						<span class="focus-input100"></span>
						
						</div>
						
						<div class="join-form-btn" style = "float:left; margin: 0px 0px 0px 50px; width:12px" >	
				 		<button type = "button" id = "addLoctaion" onclick = "addInterestLocation_join()"> + </button>
						</div>
					</div>
					

					<div class="low_middle">관심분야
						<select name = "interest1cd" id = "interest1cd"  size = '4' multiple = 'multiple'  onchange = "interest1(this)">
							<option th:each="i1 :  ${interest1cd}" th:value = "${i1.interest1Code}" th:text = "${i1.codeValueKorean}"></option>
						</select>

<!-- <span><select name = "interest2cd" id = "interest2cd"  size = '4' multiple = 'multiple'  onchange = "interest2(this)">
<option th:each="i2 :  ${interest2cd}" th:value = "${i2.interest2Code}" th:text = "${i2.codeValueKorean}">
</option>
</select></span> -->

						<span class = "dinterest2cd" name = "dinterest2cd" id = "dinterest2cd">
						<select size = '4' multiple = 'multiple'  onchange = "interest2(this)">
						<option th:each="di2 :  ${dinterest2cd}" th:value = "${di2.interest2Code}" th:text = "${di2.codeValueKorean}"></option>
						</select>
						</span>

						<span class = "ninterest2cd" name = "ninterest2cd" id = "ninterest2cd">
						<select size = '4' multiple = 'multiple'  onchange = "interest2(this)">
						<option th:each="ni2 :  ${ninterest2cd}" th:value = "${ni2.interest2Code}" th:text = "${ni2.codeValueKorean}"></option>
						</select>
						</span>

						<span class = "pinterest2cd" name = "pinterest2cd" id = "pinterest2cd"><select size = '4' multiple = 'multiple'  onchange = "interest2(this)">
						<option th:each="pi2 :  ${pinterest2cd}" th:value = "${pi2.interest2Code}" th:text = "${pi2.codeValueKorean}"></option>
						</select></span>

						<span class = "winterest2cd" name = "winterest2cd" id = "winterest2cd"><select size = '4' multiple = 'multiple'  onchange = "interest2(this)">
						<option th:each="wi2 :  ${winterest2cd}" th:value = "${wi2.interest2Code}" th:text = "${wi2.codeValueKorean}"></option>
						</select></span>



						<div id = "interest1cd" name = "interest1cd" >
							<div id = "int1"></div>
						</div>

						<div id = "interest2cd" name = "interest2cd">
							<div id = "int2"></div>
						</div>
					
					</div>

<script>

		//관심지역 
       
		function addInterestLocation_join() {
       	
           
       	new daum.Postcode({
               oncomplete: function(data) {

                   var roadAddr = data.roadAddress; // 도로명 주소 변수
                   var jibunAddress = data.jibunAddress;
                   var road = data.roadname;
                   var sido = data.sido;
                   var sigungu = data.sigungu;
                   var dong = data.bname;
                   var upmyeonli = data.bname1;
                   
                   var dongaddress = sido + "" + sigungu  + "" + dong + "" + upmyeonli;
                   var doroaddress = sido + sigungu + road;
                   
                   var extraRoadAddr = ''; // 참고 항목 변수
   					
                   if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)){
                       extraRoadAddr += data.bname;
                   }

                   if(data.buildingName !== '' && data.apartment === 'Y'){
                      extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                   }

                   

                   var guideTextBox = document.getElementById("guide");
                   
                   if(data.autoRoadAddress) {
                       var expRoadAddr = data.autoRoadAddress + extraRoadAddr;
                       guideTextBox.innerHTML = '(예상 도로명 주소 : ' + expRoadAddr + ')';
                       guideTextBox.style.display = 'block';

                   } else {
                       guideTextBox.innerHTML = '';
                       guideTextBox.style.display = 'none';
                      	
                    var locValue = "<input class = 'memberinterest' type = 'text' id = 'interestlocation" +count+ 
                   	"' name = 'interestlocation[" + count + 
                    "].interestLocation'> <button type ='button' class = 'memberinterest' id = 'del" + count + "' value = '삭제' onclick = 'deleteLocation_join(" + count + ")'>X</button>"
                   	$('#loc').append(locValue);

                   	document.getElementById("loc").style.height = "100%";
                   	
/*                     	var locText = "<div id = 'selloc' ><ul><li>" +dongaddress+ "</li></ul></div>"
                   	$('#loc').append(locText); */
                   	                 	
                   	document.getElementById("interestlocation"+count).value = dongaddress;
                   					
   					count++;
   					
                   }
               	
               } 
           }).open();
       }
       
        function deleteLocation_join(num) {
   		var standard = num;
   		$('#interestlocation' + standard).remove(); 
   		$('#del' + standard).remove(); 
   		
   		if(document.getElementsByClassName("memberinterest").length == 0 ) {
   			document.getElementById("loc").style.height = "50px";
   		}
   		} 

        
        //관심분야
        
        var interestArr = ["데이터베이스", "네트워크&보안", "응용프로그래밍", "웹프로그래밍"];
		 var count = 0;
		 var sinterest1 = "";
 		var pinterest2cd = document.getElementById("pinterest2cd")
 		var checkNum = 0;
 
	 function interest1(obj) {
    	   sinterest1 = obj.options[obj.selectedIndex].text;
       	for( var i = 0; i < AllselectBox.length; i++) { 
                AllselectBox[i].style.display = 'none'; 
           if(sinterest1 == interestArr[i]){          
             checkNum = i;
          }               
        }
         AllselectBox[checkNum].style.display = 'inline-block';        
	  } 
 
 
 
 var interest2List = new Array();
 var selectedinterest2 = "";  
 var addInterest2List;
 var interestInput = "";
 var interestDelete = "";

    function interest2(obj) {   
    var target = document.getElementById("int2");
    uniqueinterest2List = interest2List;
    
     
   if(~selectedinterest2.indexOf(obj.options[obj.selectedIndex].text))   {
      alert("이미 선택한 분야입니다.");
   }
   else {
      interest2List.push(obj.options[obj.selectedIndex].text);
      selectedinterest2 += interest2List[interest2List.length-1];    
     
      addinterestListValue = "<input type = 'text' id = 'isel" + count +  "' name = 'tutorinterest[" + count + "].interest2CD'></input> <input type = 'button' value = '삭제' id = 'idel" + count + "' onclick = 'deleteInterest(" + count + ")'>";    
      $('#int2').append(addinterestListValue);  
      
      document.getElementById('isel'+ count).value = obj.options[obj.selectedIndex].value;
      
      addInterest2List = "<li id = 'liisel" + count +  "'>" + sinterest1 + " > " + interest2List[interest2List.length-1] + "</li> <input type = 'button' value = '삭제' id = 'liidel" + count + "' onclick = 'deleteInterest(" + count + ")'>";
       $('#int2').append(addInterest2List); 
         
       	 interestInput = document.getElementById('isel'+count);
       	 interestInput.style.display = 'none'; 
       	 interestDelete = document.getElementById('idel'+count);
       	 interestDelete.style.display = 'none';  
         
       count++;
   }
   
      
 }  
   
   function deleteInterest(num) {
      selectedinterest2 = selectedinterest2.replace(interest2List[num],"")      // 중복금지차원
      $('#isel' + num).remove(); 
      $('#idel' + num).remove(); 
      $('#liisel' + num).remove(); 
      $('#liidel' + num).remove(); 
      
       
   } 
   
   function deleteCareer(num) {
      selectedCareer = selectedCareer.replace(careerList[num],"")      // 중복금지차원
       $('#csel' + num).remove(); 
       $('#cdel' + num).remove(); 
       $('#licsel' + num).remove(); 
       $('#licdel' + num).remove(); 
       
   }

</script>					
					
					
					
					
					
					
					
			</article>
		</div>
		<!-- 메인과 이너 영역 인데 이것을써서 내것을 추가    -->
	</div>
	<!-- 메인과 이너 영역 인데 이것을써서 내것을 추가    -->


</body>
</html>