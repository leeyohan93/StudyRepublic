<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
layout:decorate="~{/layout/mainLayout}">
<head>
<title>Study Detail View</title>
<meta http-equiv="Content-Type" content="text/html"; charset="UTF-8">
<style type="text/css">
	
	.studyDetail {
		/* box-shadow: X오프셋 Y오프셋 블러반경 퍼짐반경 색상; */
/* 		box-shadow: 0.3em 0.3em 10px 3px silver; */
		box-shadow: 0 16px 40px rgba(0,0,0,0.12) !important;
		border:	0.5px solid rgba(0,0,0,0.12);
		width: 100%;
		margin: 1em auto;
		padding: 2em 2em;
		position:relative;
		min-width: inherit;
		
	}
	
	.basic-info {
		position: relative;

	}
	
	.column-name {
		font: bold;
	}
	
	.essential-info-1 {
		margin: 2em 2em;
	}
	
	.essential-info-2 {
		margin: 1em 2.5em;
	}
	
	.box-info {
		display: inline-block;
		top: 8px;
		right: 16px;
		float: right;
		width: 100px;
		background-color: lightgray;
		font: bold 20px;
		vertical-align: 50%;
		position: absolute;
		text-align: center;
		padding: 0 0;
		
	}
	
	.enroll-count {
		font: bold x-large;
		padding: 0.5em 0;
	}
	
	.level {
		background-color: silver;
		font: white;
		padding: 0.3em 0;
	}
	
	.row {
		margin: 0.5em 1em;
	}
	
	.tag {
		border-radius: 1em;
		background-color: lightblue;
		font: white bold;
		width: translateX(120%);
		padding: 0 0.8em;
		margin: 0.2em;
	}
	
	
	.intro {
		width: calc(100%-100px);
		margin: 1.5em 3em 2em;
		
	}
	
	.intro-content {
		width: calc(100%-100px);
		border: solid 1px #ddd;
		padding: 1em;
/* 		margin: 0 3em 2em; */
		display: block;
	}
	
	.additional-info {
		width: calc(100%-100px);
/* 		display: block; */
/* 		padding: 1em; */
		margin: 0 3em 2em;
	}
	
	/* .tab-head:after{content:"";display:table;clear:both;*zoom:1} */
	/* .tab-head .tab-item:disabled{cursor:default;color:#888} */
	/* .tab-head.one-tab .tab-item{width:100%;margin:0 -1px} */
	/* .tab-content{display:none;padding-top:30px} */
	/* .tab-content.on{display:block} */
	
	.tab-head0 {
 		margin: 0.2em 0 0;
/* 		display: block; */
		display: inline-flex;
		width: 100%;
		position: relative;
/* 		top: 0.5px; */
	}

	/* .tab-head .tab-item{} */
	.tab-item0 {
		box-sizing:border-box;
		background-color:#fafafa;
		border:1px solid #ddd;
		float:left;
		margin-left:-1px;
		margin-bottom:-1px;
		text-align:center;
		
		display: inline-block;
		height: auto;
		width: 20%;
	}
	
	/* .tab-head .tab-item:after{content:"";display:table;clear:both;*zoom:1} */
	/* .tab-head .tab-item.tab-active{background-color:#fff;border-bottom:1px solid #fff;opacity:1} */
	.tab-item0.tab-active {
		background-color: white;
		border-bottom:1px solid #fff;
		opacity:1
	}
	
	.tab-content {
		display: block;
		border: solid 1px #ddd;
		width: 100%;
		padding: 1em;
	}

	.sticky {
		position: -webkit-sticky;
		position: sticky;
		bottom: 10%;
		padding: 5px;
		font: 0.9em white;
		text-align: center;
		margin: 0 auto 2em;
		left: 50%;
 		transform: translateX(-50%);
		
	}
	
	.invisible {
		display: none;
	}
	
</style>
</head>
<body>

	<div layout:fragment="main">
		<div class="inner">
		<h3>스터디 상세</h3>
		<section class="studyDetail">
			<section class="row basic-info">
				<div class="row essential-info-1">
					<div class="col-md-2 column-name">스터디명</div>
					<div class="col-md-10 column-value"><span th:text="${study.name}">name</span></div>	
					<div class="col-md-2 column-name">기간</div>
					<div class="col-md-10 column-value"><span th:text="|${study.startDate}~${study.endDate}|">period</span>(<span th:text="${dayDiff}">n</span>개월)</div>
					<div class="col-md-2 column-name">일시</div>
					<div class="col-md-10 column-value"><span th:utext="|매주 ${study.dayCode.codeValueKorean}요일 ${#dates.format(study.startTime, 'HH:mm')}~${#dates.format(study.endTime, 'HH:mm')}|">schedule</span>(<span th:text="${timeDiff}">n</span>시간)</div>
				</div>
				<div class="row essential-info-2">
					<div class="col-md-2 column-name">유형</div>
					<div class="col-md-10 column-value"><i class="tag-primary" th:text="${study.typeCode.codeValueKorean}">type</i></div>
					<div class="col-md-2 column-name">진행방식</div>
					<div class="col-md-10 column-value"><i class="tag-primary" th:text="${study.onoffCode.codeValueKorean}">onoff</i></div>
					<div class="col-md-2 column-name">지역</div>
					<div class="col-md-10 column-value"><th:block th:each="location : ${study.studyLocation}"><i class="tag" th:text="${location.interestLocation}">location</i>&nbsp;</th:block></div>
					<div class="col-md-2 column-name">분야</div>
					<div class="col-md-10 column-value"><th:block th:each="interest : ${study.studyInterest}"><i class="tag" th:text="${interest.interest2code.codeValueKorean}">interest</i>&nbsp;</th:block></div>
					<div class="col-md-2 column-name" th:if="${study.price}">가격</div>
					<div class="col-md-10 column-value"><th:block th:text="${study.price.price}">studyPrice</div>
				</div>
				<div class="box-info">
					<div class="enroll-count" th:text="|${study.enrollActual}/${study.enrollCapacity}|">n/m</div>
					<i class="tag btn-primary btn-xs" th:text="${study.studyStatusCode.codeValueKorean}">study status</i>
					<div class="level">레벨: <strong><th:block th:text="${study.levelCode.codeValueKorean}">level</th:block></strong></div> 
				</div>

			</section>
			<section class="intro">
				<h4>소개</h4>
				<div class="intro-content">
					<p th:text="${study.introduction}"></p>
				</div>
			</section>
			<section class="additional-info">
				<div class="tab-head0">
					<ul class="tab-head0">
						<li type="button0" class="tab-item0 tab-active">
							<span class="txt-tab">리더 정보</span>
						</li>
						<li type="button0" class="tab-item0">
							<span class="txt-tab">강의 후기</span>
						</li>
					</ul>
				</div>
<!-- 				스터디 타입에 따라 불러오는 데이터 달라진다. (미구현 상태) -->
				<div class="tab-content leader-info">
					<div class="profile-container">
						<div class="profile-image-container">
							<th:block th:if="${leaderInfo.profileSaveName} != null"><img alt="|${leaderInfo.nickname}님의 프로필 사진|" src="@{/static/images/${leaderInfo.id}/${leaderInfo.profile_save_name}}"></th:block>
							<th:block th:unless="${leaderInfo.profileSaveName} != null"><img alt="|${leaderInfo.nickname}님의 프로필 사진|" src="@{/static/images/defaultProfile.jpg}"></th:block>
							<span th:text="${leaderInfo.nickname}">리더 이름</span>
						</div>
					</div>
					<p th:if="${leaderInfo.memberInterest}!=null" th:text="${leaderInfo.memberInterest}">관심 분야</p>
					<div class="study-activity">
						<h4>활동내역</h4>
						<table>
							<tr>
								<th>No.</th>
								<th>스터디명</th>
								<th>기간</th>
								<th>평점</th>
							</tr>
							<tr th:each="tempStudyActivity : ${studyActivity}">
								<th:block th:with="tempStudy = ${tempStudyActivity.study}">
									<td>no.</td>
									<td th:text="${tempStudy.name}">studyName&nbsp;<i class="tag" th:text="${tempStudy.studyStatusCode.codeValueKorea">status</i></td>
									<td th:text="|${tempStudy.startDate}~${tempStudy.endDate}|">period</td>
<!-- 									<td th:text="${avgScore}">avgScore</td> -->
<!-- 스터디 A 의 리뷰의 score, count(*) 검색 -->
<!-- sum(score)/count(*) = avg  -->
								</th:block>
							</tr>
						</table>
<!-- 						테스트 -->
<!-- 						<div th:each="tempStudyActivity : ${studyActivity}" th:text="${tempStudyActivity}"></div> -->
					</div>
				</div>
				<div class="tab-content review">
					<p th:text="${review}">후기 리스트</p>
				</div>
			</section>
			<button class="sticky">스터디 가입 신청</button>
		</section>
		</div>
	</div>

	<script type="text/javascript">
		//     	1. 탭 메뉴 : 완료된 스터디의 경우에만 리뷰 탭 class=active & 버튼 활성화

		//     	2. 스터디 가입 : 이미 가입된 스터디인 경우, 거절/탈퇴한 스터디인 경우, 	가입 승인 대기중인 스터디인 경우 --> 메시지
		// 					 정원 초과된 스터디인 경우 --> 버튼 비활성화
	</script>
</body>
</html>
