<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layout/mainLayout}">
<head>



<title>강사신청</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta id="_csrf" name="_csrf" th:content="${_csrf.token}" />
<!-- default header name is X-CSRF-TOKEN -->
<meta id="_csrf_header" name="_csrf_header"
	th:content="${_csrf.headerName}" />
<!--===============================================================================================-->
<link rel="icon" type="image/png"
	href="/Login_v18/images/icons/favicon.ico" />
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="/Login_v18/vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="/Login_v18/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="/Login_v18/fonts/Linearicons-Free-v1.0.0/icon-font.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="/Login_v18/vendor/animate/animate.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="/Login_v18/vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="/Login_v18/vendor/animsition/css/animsition.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="/Login_v18/vendor/select2/select2.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="/Login_v18/vendor/daterangepicker/daterangepicker.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="/Login_v18/css/util.css">
<link rel="stylesheet" type="text/css" href="/Login_v18/css/main.css">
<!--===============================================================================================-->
<script type="text/javascript" src="/smarteditor/js/HuskyEZCreator.js"
	charset="utf-8"></script>
<style>
#edu {
	display: none
}

.has-val{
	height:0;
}

#ppinterest2cd {
	display: none
}

#ddinterest2cd {
	display: none
}

#wwinterest2cd {
	display: none
}

#nninterest2cd {
	display: none
}
</style>

</head>
<body>

	<div id="wrapper">
		<div layout:fragment="main">
			<div class="inner">



				<div class="limiter">


					<div class="filePicture">
						<div th:each="md : ${mdu}">
							<form class="login100-form validate-form" name="image_Form"
								id="image_Form" action="attachments" method="post"
								style="margin-top: 50px; margin-bottom: 0; width: 940px; padding: 100px 55px 0px 55px;">
								<span class="login100-form-title p-b-43"> 프리미엄등급 신청 </span>

								<div class="wrap-input100_label"
									style="width: auto; height: auto; margin-bottom: 80px">
									<span class="label-input100_label" style="width: 110px;">*
										프로필사진</span>
								</div>

								<img id="img_profile"
									th:src="@{'/member_image/'+${md.profileSaveName}}"
									style="width: 200px; height: 240px; border-radius:100%;"  /> <br> <label
									style="width: 140px; margin: 0 0 10px 26px;"> 프로필사진등록하기
									<input name="sourceFile" id="sourceFile" type="file">
								</label>

								   <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />


								<div class="join-form-btn"
									style="margin: 0px 0px 0px 0px; width: 200px; height: 43px;">
									<input class="join-form-btn" type="button" id="newimg_upload"
										name="newimg_upload" value="이미지변경"
										style="width: auto; font-size: 12px" />
								</div>
							</form>

						</div>
					</div>


					<form id="tutorjoin" class="login100-form validate-form"
						method="post" autocomplete="off" action="/tutor/insert"
						enctype="multipart/form-data"
						style="width: 940px; padding: 0px 55px 55px 55px;">


						<!-- 						<div class = "wrap-input100 validate-input" style = "border:none"> 
						<input class = "input100" type="text" id= "id" name = "member" th:value = "${id}" readonly = "readonly" style = "display:none">				
						 <div class = "ysh" th:text = "${memberName}"></div> 
						</div> -->




						<input class="input100" type="text" id="id" name="member"
							th:value="${id}" readonly="readonly" style="display: none">

						<!-- 						<div class = "wrap-input100_label" style = "width:146px">
						<span class="label-input100_label" style = "width:auto">프리미엄등급신청</span>
						</div> -->

						<div class="wrap-input100_label"
							style="width: auto; height: auto; margin-bottom: 30px"></div>




						<div class="wrap-input100_label"
							style="width: auto; height: auto; margin-bottom: 30px">
							<span class="label-input100_label" style="width: 250px;">*
								경력 및 개설스터디 희망분야</span>
						</div>

						<div class="wrap-input100 validate-input"
							style="width: auto; border: none; margin: auto;">

							<div class="wrap-input100_head validate-input"
								style="float: left;">
								<span class="yshspan">학력</span>
							</div>
							<div class="wrap-input100_head validate-input"
								style="float: left;">
								<span class="yshspan">경력사항</span>
							</div>
							<div class="wrap-input100_head validate-input"
								style="float: left;">
								<span class="yshspan">강의희망분야 1차</span>
							</div>
							<div class="wrap-input100_head validate-input" id="2int"
								style="float: left; margin: 0; display: none">
								<span class="yshspan">강의희망분야 2차</span>
							</div>
						</div>

						<div class="select-input100" style="float: left; border: none;">
							<select class = "shsel"name="educationcd" id="educationcd" size='100'
								multiple='multiple' onchange="education(this)">
								<option th:each="e :  ${educationcd}"
									th:value="${e.educationCode}" th:text="${e.codeValueKorean}">
								</option>
							</select>
						</div>

						<div class="select-input100" style="float: left; border: none;">
							<select class = "shsel" th:field="*{careercd}" size='4' multiple='multiple'
								onchange="career(this)">
								<option th:each="c :  ${careercd}" th:value="${c.careerCode}"
									th:text="${c.codeValueKorean}"></option>
							</select>
						</div>



						<div class="select-input100"
							style="float: left; border: none; margin-bottom: 50px;">
							<select class = "shsel" name="interest1cd" id="interest1cd" size='4'
								multiple='multiple' onchange="iinterest1(this)">
								<option th:each="i1 :  ${interest1cd}"
									th:value="${i1.interest1Code}" th:text="${i1.codeValueKorean}">
								</option>
							</select>
						</div>

						<div class="select-input100_2" id="ddinterest2cd"
							style="float: left; border: none;">
							<span class="dinterest2cd" name="dinterest2cd"> <select class = "shsel"
								size='4' multiple='multiple' onchange="iinterest2(this)">
									<option th:each="di2 :  ${dinterest2cd}"
										th:value="${di2.interest2Code}"
										th:text="${di2.codeValueKorean}"></option>
							</select></span>
						</div>

						<div class="select-input100_2" id="nninterest2cd"
							style="float: left; border: none;">
							<span class="ninterest2cd" name="ninterest2cd"> <select class = "shsel"
								size='4' multiple='multiple' onchange="iinterest2(this)">
									<option th:each="ni2 :  ${ninterest2cd}"
										th:value="${ni2.interest2Code}"
										th:text="${ni2.codeValueKorean}"></option>
							</select></span>
						</div>


						<div class="select-input100_2" id="ppinterest2cd"
							style="float: left; border: none;">
							<span class="pinterest2cd" name="pinterest2cd"><select class = "shsel"
								size='4' multiple='multiple' onchange="iinterest2(this)">
									<option th:each="pi2 :  ${pinterest2cd}"
										th:value="${pi2.interest2Code}"
										th:text="${pi2.codeValueKorean}"></option>
							</select></span>
						</div>

						<div class="select-input100_2" id="wwinterest2cd"
							style="float: left; border: none;">
							<span class="winterest2cd" name="winterest2cd"><select class = "shsel"
								size='4' multiple='multiple' onchange="iinterest2(this)">
									<option th:each="wi2 :  ${winterest2cd}"
										th:value="${wi2.interest2Code}"
										th:text="${wi2.codeValueKorean}"></option>
							</select></span>
						</div>


						<div class="wrap-input100 validate-input"
							style="height: 100%; padding: 20px; margin: auto;">

							<div class="wrap-input100_ validate-input_">
								<div id="education" name="education">
									<div class="ysh" id="sedu" style="margin-bottom: 20px;"></div>
								</div>
							</div>

							<div class="wrap-input100_ validate-input">
								<div id="career" name="career">
									<div id="scar"></div>
								</div>
							</div>

							<div class="wrap-input100_ validate-input">
								<div id="interest1cd" name="interest1cd">
									<div id="int1"></div>
								</div>
							</div>

							<div class="wrap-input100_ validate-input">
								<div id="interest2cd" name="interest2cd">
									<div id="int2"></div>
								</div>
							</div>

						</div>
						
			   <div class="wrap-input100 validate-input" style = "border:none; margin:0">
               <span class="login100-form-title-error p-b-43" id = "duplicationmsg">
                  		
               </span>
</div>


						<div class="wrap-input100 validate-input"
							style="width: auto; margin: 0; border: none; margin: auto;">
							<div class="wrap-input100_label"
								style="width: auto; display: block; margin-bottom: 20px">
								<span class="label-input100_label" style="width: 100px;">*
									자기소개</span>
							</div>
						</div>

						<div id = "introduction" class="join-input100" style="width: 100%; align-items: baseline; height:500px;border:none;">
							
					<div id="editor" style = "width:100%;">
					<div>
						<textarea name="introduction" id="smarteditor" rows="10" cols="100"></textarea>
					</div>
				</div>
						
						</div>


						<div class="wrap-input100 validate-input"
							style="width: auto; margin: 0; border: none; margin: auto;">
							<div class="wrap-input100_label"
								style="width: auto; display: block; margin-bottom: 20px">
								<span class="label-input100_label" style="width: 100px;">*
									증명서류</span>
							</div>
						</div>

						<div class="join-input100"
							style="float: left; width: 100%; height: 150px">
							<span class="label-input100"> <pre>스터디공화국에서는 본인 확인 및 학력, 경력사항 증명 차원에서 관련 증명 서류를 받고 있습니다.</pre>
								<pre>필수 사항 : 신분증 스캔본, 학력 증명서, 경력 증명서</pre> <pre>선택 사항 : 자격증 증명서</pre>
							</span>
						</div>



						<div class="wrap-input100 validate-input" id="fileDumy"
							style="height: 100%; padding: 20px; margin: 0 15px 0 0; margin-bottom: 40px; width: 730px; float: left">



						</div>
						<div class="join-form-btn" id="addFile"
							style="margin: 15px 0px 0px 50px; width: 70px; height: 43px;">
							<button type="button">파일추가</button>
						</div>




						<div class="wrap-input100 validate-input"
							style="border: none; margin: auto; width: 400px">
							<div class="join-form-btn"
								style="display: inline-block; width: auto; height: auto; margin: auto;">
								<button type="button" onclick="location.href='/index'">
									취소</button>
							</div>

							<div class="join-form-btn"
								style="display: inline-block; width: auto; height: auto; margin: auto;">
								<button type="button" id="signup">신청</button>
							</div>
						</div>

						<input type="hidden" th:name="${_csrf.parameterName}"
							th:value="${_csrf.token}" />
					</form>

				</div>








			</div>




			<!--===============================================================================================-->
			<script src="/Login_v18/vendor/jquery/jquery-3.2.1.min.js"></script>
			<!--===============================================================================================-->
			<script src="/Login_v18/vendor/animsition/js/animsition.min.js"></script>
			<!--===============================================================================================-->
			<script src="/Login_v18/vendor/bootstrap/js/popper.js"></script>
			<script src="/Login_v18/vendor/bootstrap/js/bootstrap.min.js"></script>
			<!--===============================================================================================-->
			<script src="/Login_v18/vendor/select2/select2.min.js"></script>
			<!--===============================================================================================-->
			<script src="/Login_v18/vendor/daterangepicker/moment.min.js"></script>
			<script src="/Login_v18/vendor/daterangepicker/daterangepicker.js"></script>
			<!--===============================================================================================-->
			<script src="/Login_v18/vendor/countdowntime/countdowntime.js"></script>
			<!--===============================================================================================-->
			<script src="/Login_v18/js/main.js"></script>
			

			<script
				src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
			<script>
				
			var token = $("meta[name='_csrf']").attr("content");
				var header = $("meta[name='_csrf_header']").attr("content");
				$(function() {
					$(document).ajaxSend(function(e, xhr, options) {
						xhr.setRequestHeader(header, token);
					});
				});

				var Allselect_Box = document
						.getElementsByClassName("select-input100_2");

				function education(obj) {
					var educationListValue = obj.options[obj.selectedIndex].value;
					var educationListText = obj.options[obj.selectedIndex].text;

					var target = document.getElementById("sedu");

					target.innerHTML = "<input type = 'text' id = 'edu' name  = 'educationCD' ></input><span class = 'yshspan'>"
							+ "> " + educationListText + "</span>";
					document.getElementById('edu').value = educationListValue;
					
				}

				var careerNum = 0;
				var careerList = new Array();
				var selectedCareer = "";
				var careerInput = "";
				var careerDelete = "";

				function career(obj) {

					var target = document.getElementById("scar");

					if (~selectedCareer
							.indexOf(obj.options[obj.selectedIndex].text)) {
						document.getElementById("duplicationmsg").innerText = "이미 선택한 직종 입니다.";
					} else {
						careerList.push(obj.options[obj.selectedIndex].text);
						selectedCareer += careerList[careerList.length - 1];
						addCareerListValue = "<input type = 'text' id = 'csel" + careerNum +  "' name = 'tutorcareer[" + careerNum + "].careerCD'></input> <input type = 'button' value = '삭제' id = 'cdel"
								+ careerNum
								+ "' onclick = 'deleteCareer("
								+ careerNum + ")'>";
						$('#scar').append(addCareerListValue);
						/* document.getElementById('csel'+careerNum).value = careerList[careerList.length-1]; */
						document.getElementById('csel' + careerNum).value = obj.options[obj.selectedIndex].value;

						addCareerListText = "<div class = 'ysh'  id = 'licsel" + careerNum +  "' ><span class = 'yshspan'>"
								+ "> "
								+ careerList[careerList.length - 1]
								+ "</span> <input class = 'yshbtn' type = 'button' value = 'X' id = 'licdel"
								+ careerNum
								+ "' onclick = 'deleteCareer("
								+ careerNum + ")'></div>";
						$('#scar').append(addCareerListText);
							
						document.getElementById("duplicationmsg").innerText = "";
						
						careerInput = document.getElementById('csel'
								+ careerNum);
						careerInput.style.display = 'none';
						careerDelete = document.getElementById('cdel'
								+ careerNum);
						careerDelete.style.display = 'none';
						
						careerNum++;
					}

				}

				var interestArr = [ "데이터베이스", "네트워크보안", "응용프로그래밍", "웹프로그래밍" ];
				var count = 0;

				var ssinterest1 = "";
				var ppinterest2cd = document.getElementById("ppinterest2cd")
				var checkNum = 0;

				function iinterest1(obj) {
					document.getElementById('2int').style.display = 'inline-block';
					ssinterest1 = obj.options[obj.selectedIndex].text;
					for (var i = 0; i < Allselect_Box.length; i++) {
						Allselect_Box[i].style.display = 'none';
						if (ssinterest1 == interestArr[i]) {
							checkNum = i;
						}
					}
					Allselect_Box[checkNum].style.display = 'inline-block';
				}

				var iinterest2List = new Array();
				var sselectedinterest2 = "";
				var aaddInterest2List;
				var interestInput = "";
				var interestDelete = "";

				function iinterest2(obj) {
					var target = document.getElementById("int2");
					uniqueinterest2List = iinterest2List;

					if (~sselectedinterest2
							.indexOf(obj.options[obj.selectedIndex].text)) {
						document.getElementById("duplicationmsg").innerText = "이미 선택한 분야 입니다.";
					} else {
						iinterest2List
								.push(obj.options[obj.selectedIndex].text);
						sselectedinterest2 += iinterest2List[iinterest2List.length - 1];

						aaddinterestListValue = "<input type = 'text' id = 'isel" + count +  "' name = 'tutorinterest[" + count + "].interest2CD'></input> <input type = 'button' value = '삭제' id = 'idel"
								+ count
								+ "' onclick = 'deleteInterest2("
								+ count + ")'>";
						$('#int2').append(aaddinterestListValue);

						document.getElementById('isel' + count).value = obj.options[obj.selectedIndex].value;

						aaddInterest2List = "<div id = 'liisel" + count +  "'class = 'ysh'><span class = 'yshspan'>"
								+ sinterest1
								+ " > "
								+ iinterest2List[iinterest2List.length - 1]
								+ "</span> <input class = 'yshbtn' type = 'button' value = 'X' id = 'liidel"
								+ count
								+ "' onclick = 'deleteInterest2("
								+ count + ")'></div>";
						$('#int2').append(aaddInterest2List);

						document.getElementById("duplicationmsg").innerText = "";	
						
						interestInput = document.getElementById('isel' + count);
						interestInput.style.display = 'none';
						interestDelete = document
								.getElementById('idel' + count);
						interestDelete.style.display = 'none';

						count++;
					}

				}

				function deleteInterest2(num) {
					sselectedinterest2 = sselectedinterest2.replace(
							iinterest2List[num], "") // 중복금지차원
					$('#isel' + num).remove();
					$('#idel' + num).remove();
					$('#liisel' + num).remove();
					$('#liidel' + num).remove();

				}

				function deleteCareer(num) {
					selectedCareer = selectedCareer
							.replace(careerList[num], "") // 중복금지차원
					$('#csel' + num).remove();
					$('#cdel' + num).remove();
					$('#licsel' + num).remove();
					$('#licdel' + num).remove();

				}

				var fileCount = 0;
				$('#addFile')
						.click(
								
								function() {
								
									var uploadFile = "<div class = 'file_input' id = 'lifile" + fileCount + "' style = 'margin: 0 60px 0 20px;'>"
											+ "<input type = 'text' readonly = 'readonly' id = 'file_route" + fileCount + "'>"
											+ "<label style = 'margin:10px'> 파일선택 <input type = 'file' id = 'fnum" + fileCount+ "' name = 'file' multiple onchange = \"javascript:document.getElementById('file_route"
											+ fileCount
											+ "').value = this.value.substring(12)\"></label>"
											+ "<input class = 'yshbtn' type = 'button' value = 'X' id = 'liidel"
											+ fileCount
											+ "' onclick = 'deleteFile("
											+ fileCount + ")'></div>"

									$('#fileDumy').append(uploadFile);

									fileCount++;
								});

				function deleteFile(num) {

					$('#lifile' + num).remove();

				}

				$("#sourceFile").on("change", handleImgFileSelect);

				function handleImgFileSelect(e) {
					var files = e.target.files;
					var filesArr = Array.prototype.slice.call(files);

					filesArr.forEach(function(f) {
						if (!f.type.match("image.*")) {
							alert("확장자는 이미지 확장자만 가능합니다.");
							return;
						}

						sel_file = f;

						var reader = new FileReader();
						reader.onload = function(e) {
							$("#img_profile").attr("src", e.target.result);
						}
						reader.readAsDataURL(f);

					});
				}
				//이미지업로드
				// form 값 전부 보내기
				$('#newimg_upload').click(
						function() {

							var idx = $(this).parent().parent().index();
							var frm = document.getElementById('image_Form');
							frm.method = 'POST';
							frm.enctype = 'multipart/form-data';

							var fileFormValue = $('#sourceFile').val();

							var fileData = new FormData(frm);

							console.log("fileData:" + fileFormValue);
							if (fileFormValue != null && fileFormValue != {}
									&& fileFormValue != '') {
								// ajax
								$.ajax({

									url : '/mypage/attachments',

									type : 'POST',
									data : fileData,
									async : false,
									cache : false,
									contentType : false,
									processData : false
								}).done(function(response) {
									alert("프로필변경이 완료되었습니다.");
									//location.reload();
								});
							} else {
								alert("파일이 첨부되지 않았습니다.");
							}
						});
				


			 	var editor_object = [];
			     
			    nhn.husky.EZCreator.createInIFrame({
			        oAppRef: editor_object,
			        elPlaceHolder: "smarteditor",
			        sSkinURI: "/smarteditor/SmartEditor2Skin.html",
			        htParams : {
			            // 툴바 사용 여부 (true:사용/ false:사용하지 않음)
			            bUseToolbar : true,            
			            // 입력창 크기 조절바 사용 여부 (true:사용/ false:사용하지 않음)
			            bUseVerticalResizer : true,    
			            // 모드 탭(Editor | HTML | TEXT) 사용 여부 (true:사용/ false:사용하지 않음)
			            bUseModeChanger : true,
			            // 기본 글꼴 설정
			            SE2M_FontName: {
			    			htMainFont: {'id': '굴림','name': '굴림','size': '14','url': '','cssUrl': ''} 
			    		}
			        }
			    

			    });
			     
			    //전송버튼 클릭이벤트
			    $("#signup").click(function(){
			        //id가 smarteditor인 textarea에 에디터에서 대입
			        editor_object.getById["smarteditor"].exec("UPDATE_CONTENTS_FIELD", []);
			        
			        
//			        var boardTitle = $('#boardTitle').val();
			        var smarteditor = $("#smarteditor").val();
//			        var boardType = $('#boardType').val();


			        $("#tutorjoin").submit();     
			    
			    }); 
				
				
				
			</script>


		</div>
	</div>
	



</body>
</html>