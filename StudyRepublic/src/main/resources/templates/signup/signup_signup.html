<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>





</head>
<body>

<div id = "wrapper">
<div id = "main" layout:fragment = "main">
<div class = "inner">

<form id = "member" action = "/member/insert" method = "post">
<!-- <input type="hidden" name="_csrf" value="{{#_csrf}}token{{/_csrf}}" /> -->
<!-- <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" /> -->
아이디 <input type = "text" name = "id"> <br>
비밀번호 <input type = "text" name = "password"> <br>
이름 <input type = "text" name = "name"> <br>
성별 <input type = "text" name = "gender"> <br>
생년월일 <input type = "text" name = "birth"> <br>
닉네임 <input type = "text" name = "nickname"> <br>
이메일<input type = "text" name = "email"> <br>
휴대전화번호<input type = "text" name = "phonenumber"> <br>
공개여부 <input type = "text" name = "visibility"> <br>
<!-- <input type="text" id="interestlocationstcode" placeholder="우편번호"> -->
<input type="button" onclick="addInterestLocation()" value="관심지역추가"><br>
<span id = "loc">
<!-- <input type="text" id="interestlocation0" name = "interestlocation[0].interestLocation" placeholder="도로명주소" />
<input type ="button" id = "add1" value = "추가" onclick = "addLocation()"/> -->
</span>

<div id="guide" style="color:#999;display:none"></div>


<!--<input type = "text" name = "profile_origin_name"> <br>
 <input type = "text" name = "profile_save_name"> <br>
<input type = "text" name = "registration_date"> <br> -->

<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" /> 
<input type = "submit" value = "회원가입">
</form>

</div>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="http://dmaps.daum.net/map_js_init/postcode.v2.js"></script>
<script>
var count = 0;
var allSpan = document.querySelectorAll("span");
    //본 예제에서는 도로명 주소 표기 방식에 대한 법령에 따라, 내려오는 데이터를 조합하여 올바른 주소를 구성하는 방법을 설명합니다.
    function addInterestLocation() {
    	
       
    	new daum.Postcode({
            oncomplete: function(data) {

                var roadAddr = data.roadAddress; // 도로명 주소 변수
                var jibunAddress = data.jibunAddress;
                var road = data.roadname;
                var sido = data.sido;
                var sigungu = data.sigungu;
                var dong = data.bname;
                var upmyeonli = data.bname1;
                
                var dongaddress = sido + " " + sigungu  + " " + dong + " " + upmyeonli;
                var doroaddress = sido + sigungu + road;
                
                var extraRoadAddr = ''; // 참고 항목 변수
					
                if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)){
                    extraRoadAddr += data.bname;
                }

                if(data.buildingName !== '' && data.apartment === 'Y'){
                   extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                }

                

                var guideTextBox = document.getElementById("guide");
                
                if(data.autoRoadAddress) {
                    var expRoadAddr = data.autoRoadAddress + extraRoadAddr;
                    guideTextBox.innerHTML = '(예상 도로명 주소 : ' + expRoadAddr + ')';
                    guideTextBox.style.display = 'block';

                } else {
                    guideTextBox.innerHTML = '';
                    guideTextBox.style.display = 'none';
                   	
                    var text = "<span id = 'selLoc" + count +  
                	"'> <input type = 'text' id = 'interestlocation" +count+ 
                	"' name = 'interestlocation[" + count + 
                		"].interestLocation'> <input type = 'button' id = 'del1' value = '삭제' onclick = 'deleteLocation(" + count + ")'/> </span>"
                	$('#loc').append(text);
                					document.getElementById("interestlocation"+count).value = dongaddress;
					count++;
					
                }
            	
            } 
        }).open();
    }
    
     function deleteLocation(num) {
		alert("dd");
		var standard = num;
		$('#selLoc' + standard).remove(); 
	/* 	count--; */

    } 
     
     
     
     
     
     
     
     
   
</script>



</body>
</html>